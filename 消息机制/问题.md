## 问题

#### Handler.postDelayed()方法是怎么实现的

- 不会延迟加入到消息队列中，正常把消息加入到消息队列头部。
- 此时Looper.loop()方法中的MessageQueue中通过next方法区获取消息
- next方法获取区消息队列中区消息，此时如果链表的头部是延迟消息，会计算出消息的延迟等待的时间用一个变量来保存，等着下次循环的时候会判断当前头部的消息是否是延迟等待的消息，如果是就阻塞队列调用 nativePollOnce()方法堵塞队列
- 当堵塞的消息队列中要有新的消息插入的时候，会唤醒当前的堵塞队列（在enqueueMessage方法中 nativeWake()），将消息放到链表的头部，此时调用next方法的时候会把消息返回给looper
- 再次循环调用next方法时，如果刚才的延迟消息时间还没到，就计算时间继续堵塞消息队列。