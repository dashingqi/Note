## 堆内存治理

#### 内存治理的三板斧

压缩、回收、复用

#### String与内存抖动

#### Bitmap内存治理

- 压缩、复用
- 缓存

#### 酌情使用枚举

#### 避免装箱带来的内存开销

- Integer i = 1;

- HashMap<Integer,String> ---> SpareArray()
- Array<Int> ---> intArray<Int>
- kotlin中使用Int?接受可空类型

#### 内存泄露

- 静态或者单利持有；
- 被生命周期长的对象所持有；
- 匿名内部类
  - Handler
  - 静态的内部类+WeakReference持有Activity

## 创建线程发生OOM



## FD泄露导致OOM

#### 控制FD的数量

- IO及时关闭

- Cursor实例及时关闭
- 及时释放HandlerThread

- kotlin的use高阶函数,函数式编程可无需关注 close()

