## 四种引用

- 强引用
- 软引用
- 弱引用
- 虚引用

###### 引用类型对比

| 引用类型 | 取得目标对象方式 | 垃圾回收条件 | 是否可能内存泄漏 |
| :------: | :--------------: | :----------: | :--------------: |
|  强引用  |     直接获取     |    不回收    |       可能       |
|  软引用  |  通过get()方法   | 看内存的情况 |      不可能      |
|  弱引用  |  通过get()方法   | 遇到了就回收 |      不可能      |
|  虚引用  |     无法获得     |    不回收    |       可能       |

#### 强引用（StrongReference）

- 如果一个对象是强引用，那么垃圾回收器就不会回收它。当内存不足的的时候，虚拟机宁肯抛出OOM使程序终止，也不会靠随意回收强引用来解决内存不足。

#### 软引用（SoftReference）

- 如果一个对象是软引用，那么当程序的内存空间充足的时候，垃圾回收器就不会回收它。
- 如果内存空间不充足的时候，就会回收这些对象的引用。
- 当垃圾回收器没有回收它，那么该对象就可以继续被使用。

#### 弱引用（WeakReference）

- 弱引与软引用的区别在于：弱引用的对象拥有更短的生命周期，在垃圾回收器扫描所管辖的区域时，如果发现了弱应用的对象，不管当前内存是否够用，就将这个弱引用进行回收。

- 但是垃圾回收器时是一个比较低级的线程，一般触发的频率较低。

- 弱引用可以和一个引用队列联合使用，如果弱引用所引用的对象被垃圾回收器回收，Java虚拟机就会把这个弱引用加入到与之关联的引用队列中。

  ```
  ReferenceQueue<String[]> referenceQueue = new ReferenceQueue<String[]>();
  WeakReference<String[]> softBean = new WeakReference<String[]>(new String[]{"a","b","c"});
  ```

  

#### 虚引用

- 与其他几种引用都不同，虚引用不会决定对象的生命周期，在任何时候都会被垃圾回收器回收。
- 虚引用必须和引用队列联合使用。当垃圾回收器准备回收一个对象时没如果发现它还有虚引用，就会在回收对象之前，把这个虚引用加入到与之关联的引用队列中。