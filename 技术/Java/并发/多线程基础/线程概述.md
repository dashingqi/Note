## 线程概述

> Android中可以同时运行多个程序，每一个程序就是一个进程。
>
> 当一个运行中的程序可能包含多个顺序执行流，每个执行流就是一个线程。

#### 进程和线程

##### 进程&线程的关系

- 进程是程序向操作系统申请资源的最小单元。
- 线程是进程中可独立执行的最小单元。

###### 进程包含如下特征

- 独立性：进程是系统中独立存在的实体，它可以拥有自己独立的资源，每一个进程都拥有自己私有的地址空间（占内存）
- 动态性：进程和程序的区别在于，程序是一个静态的指令集合，二进程是一个动态的指令集合。
- 并发行：多个进程可以在单个处理器上并发执行，多个进程之间不会互相影响。

###### 并发行和并行性

- 并行性指的是在同一个时刻有多条指令在不同处理器上同时执行；
- 并发行指的是在同一个时刻有一条指令执行，但是多个进程指令被快速执行，使得宏观上看多个进程同时执行的效果。

##### 线程

- 线程是进程的执行单元。
- 进程中包含线程，可以包含多个线程。
- 线程不占有系统资源，线程与进程中其他线程共享进程的资源。

#### 多线程的优势

- 进程之间不能共享内存，但是线程之间可以共享内存。
- 系统创建进程需要重新分配资源，但是创建线程代价小，使用多线程来实现任务并发比多进程的效率高。
- Java内置的多线程功能支持，简化了多线程的编程。

#### 为什么创建线程对象要比普通类的对象成本要高一些

- Java虚拟机会为每一个线程分配调用栈所需的内存空间。
  - 调用栈用于跟踪 Java 代码间的调用关系以及Java代码对本地（Native Code）代码调用关系。
- Java平台中的每个线程可能还会有一个内核线程。

#### 用户线程与守护线程（Daemon Thread）

- 守护线程：守护线程不会阻止Java虚拟机正常的退出
- 用户线程：用户线程会阻止Java虚拟机的正常退出（Java 虚拟机会在所有用户线程执行完毕之后才能退出）