## Https原理

#### 传统的http方式在网络传输时存在哪些问题-

- 明文传输数据，容易出现数据被监听和窃取的情况
- 传输的数据还有可能被别人修改，导致发送与接收的数据不一致。
- 因此http时一种不安全的传输协议。

#### Https

###### 对称加密的引入

- http是明文的，我们要对数据进行加密，为了考虑到传输效率的问题，我们采用对称加密。

###### 非对称加密的引入

- 如果我们想要安全的创建一个对称加密的密钥，我们可以让浏览器这边随机生成，但是生成出来的密钥不能直接在网络上传输，而要用网站提供的公钥对其进行非对称加密。
- 由于公钥加密的数据只能有服务端的私钥才能进行解密，因此这段数据在网络上传输是安全的。
- 当网站收到消息后，用私钥进行解密，就获取到浏览器生成的密钥了。
- 当浏览器与网站首次商定密钥的时候需要使用非对称加密，一旦网站收到了浏览器发来的密钥之后，双发就可以使用对称加密来进行通信了。
- 因此又保证了安全性和效率问题。

###### 那么浏览器端中 非对称加密的 公钥是怎么来的呢？ CA机构

> CA机构专门用来给各个网站发数字证书，保证了浏览器可以安全的获取到各个网站的公钥。

- 首先作为网站的管理员，我们会向CA机构请求，将自己网站的公钥提交给CA机构。
- CA机构会使用我们提交的公钥，加上一系列其他信息 比如网站名称，来制作证书。
- 证书制作完成后，CA机构会使用自己的私钥对其加密，将加密后的数据返回给我们，我们需要将获得加密数据配置到服务器上就行。
- 每当浏览器请求我们网站的时候，会将加密数据返回给浏览器，浏览器会用CA机构的公钥来解密这个加密数据。
- 当我们解析成功后，就可以得到CA机构给我们网站的证书，其中包括了我们网站的公钥。

###### 那么CA的公钥是如何获取的呢？

- 世界上网络很多，CA机构就几家，在我们的操作系统中提前内置好了，我们不需要额外的获取。解密的时候只需要遍历系统中内置的CA机构的公钥，任何一个能够解密，就说明它的合法的。



#### 那么Https是对称加密还是非对称加密呢？

- https使用的是对称加密和非对称加密相结合的方式。





