## 常说的【四层】和【七层】到底是什么

TCP/IP协议是一个【有层次的协议栈】

#### TCP/IP网络分层模型

![image-20220304195220427](https://raw.githubusercontent.com/dashingqi/DQPicBeg/main/202203041952407.png)

把【大事】通过【分层】拆分成一个一个【小事】来做

TCP/IP协议共有四层，每一层需要下层的支撑，同时支撑着上层

从下往上数，第一层就是最下面的一层

###### 第一层【链接层】【MAC层】

负责在以太网、WIFI这样的底层网络上发送原始数据。工作在网卡这个层次，使用MAC地址来标记网络上的设备，也叫【MAC层】

###### 第二层【网际层】

是IP协议工作的层

IP协议定义了“IP地址”概念；在【链接层】的基础上，用IP地址取代了MAC地址，把广域网、局域网连接成一个虚拟的巨大网络

###### 第三层【传输层】

是TCP协议工作的层，另外一个小伙伴是【UDP】

TCP是一个有状态的协议，需要先于对方建立链接然后才能发送数据，保证数据不丢失；TCP的数据是连续的【字节流】，有先后顺序；

UDP比较简单，无状态，不用事先建立链接就可以发送任意数据，不保证数据一定会发到对方；UDP是分散的小数据包，是顺序发，乱序收；

###### 第四层【应用层】

面向具体应用的协议

同时也是HTTP协议工作的层

HTTP，FTP，SMTP；



MAC层传输的单位是【帧】、IP层传输的单位是【包】、TCP层传输单位是【段】、HTTP的传输单位是【消息、报文】

#### OSI网络分层模型

OSI【开放式系统互联通信参考模型】

![image-20220306091037984](https://raw.githubusercontent.com/dashingqi/DQPicBeg/main/202203060910243.png)

###### 物理层

网络形式的物理，例如【电缆】【网卡】【光纤】

###### 数据链路层

相当于【TCP/IP】的【链接层】

###### 网络层

相当于【TCP/IP】的【网际层】

###### 传输层

相当于【TCP/IP】的【传输层】

###### 会话层

维护网络中的连接状态，保持回话和同步

###### 表示层

把数据转换为合适、可理解的语法和语义

###### 应用层

面向具体的应用传输数据

###### 优点【相比较于TCP/IP】

- 【TCP/IP】是纯软件的路线，它补充了网络上应有的根基【电缆】【网卡】等设备的位置；
- OSI为每一层标记了明确的编号，【TCP/IP】没有明确的编号只有名字

#### 两个分层的映射关系

![image-20220306092419489](https://raw.githubusercontent.com/dashingqi/DQPicBeg/main/202203060924882.png)

#### TCP/IP协议栈的工作方式

###### 发送时

- HTTP协议里传输内容【HTML】，HTTP为它加一个HTTP专用附加数据；
- 在TCP层为数据再次打包，加上【TCP头】；
- 在IP层加上【IP头】，在MAC层加上【MAC头】。

###### 接受到【进行数据的拆解】

- 在IP层、MAC层拆包
- 去除【TCP头】
- 去除【HTTP头】，拿到HTML内容
