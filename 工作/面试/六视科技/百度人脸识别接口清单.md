## 授权激活（FaceAuth鉴权接口）

- initLicenseOnLine（在线鉴权）

- initLicenseOffLine（离线鉴权）

- setActiveLog（开启底层Log输出）



## 1:N 人脸搜索

#### 人脸搜索

- setCaneraFacing()  设置相机的ID

- startPreview() 打开预览

- onDetectCheck() 人脸检索(包含检测、活体、特征、人脸搜索全流程)

#### 人脸注册

- setCameraFacing()  设置相机的ID

- startPreview() 打开预览
- SingleBaseConfig.getBaseConfig().getType(); 获取的获取，根据 liveType来判断是否是活体
- detect()
- feature()
- displayCompareResult()

#### 人脸库管理

- getUserGroupInfo  获取组列表信息
- deleteUserGroupListInfo  删除组列表信息
- getUserListInfoByGroupId 获取用户列表信息
- deleteUserListInfo  删除用户列表信息
- 删除用户列表信息：

#### 批量导入

- batchImport() 批量导入的接口

- FileUtils.getBatchImportDirectory(); //获取压缩包导入目录

- 遍历该目录下的所有所有文件

  ```java
  String[] files = batchFaceDir.list();
      if (files == null || files.length == 0) {
          LogUtils.i(TAG, "导入数据的文件夹没有数据");
          if (mImportListener != null) {
              mImportListener.showToastMessage("导入数据的文件夹没有数据");
          }
          return;
      }
  ```

  

- 判断Face.zip文件是否存在

- 判断图片的后缀（.jpg .png）

- 判断图片的命名 (按照“-”分割，获取组名和用户名)

- 过滤掉数据库中已经存在的

## 1:1 人证比对

- BDFaceImageInstance
- FaceDetect--> detect() 获得 FaceInfo[] 获取到脸部数据
- FaceDetect--> feature() (syncFeature()) 人脸特征提取
- match 比对。FaceSDKManager.getInstance().getFaceFeature().featureCompare（）

## 属性检测

- ```
  //开启属性检测
  SingleBaseConfig.getBaseConfig().setAttribute(true);
  FaceSDKManager.getInstance().initConfig();
  ```



- ```
  //相机的预览，构造Bitmap，
  PsCamera
  ```

- ```
  LivenessModel livenessModel = new LivenessModel();
  rgbInstance = new BDFaceImageInstance()
  //获取到FaceInfo[] 脸部数据Model 特征值
  FaceSDKManager.getInstance().getFaceDetect()
                  .track()
  FaceSDKManager.getInstance().getFaceLiveness().silentLive()
  
  //将构造好的livenessModel对象通过回调 将数据返回
  ```

- ```
  SingleBaseConfig.getBaseConfig().setAttribute(false);
  FaceSDKManager.getInstance().initConfig();
  ```

## 难点

- 整个数据的采集以及数据的识别上，要理清整个思路，理清API的调用，就得熟悉文档

- 自定义相机上，包括UI层面上，以及摄像头参数设置的适配上。

  